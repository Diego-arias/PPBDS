<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="7.5 Income from trains using Bootstrap | Preceptor’s Primer for Bayesian Data Science" />
<meta property="og:type" content="book" />



<meta name="github-repo" content="davidkane9/PPBDS" />

<meta name="author" content="David Kane" />

<meta name="date" content="2020-06-25" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="7.5 Income from trains using Bootstrap | Preceptor’s Primer for Bayesian Data Science">

<title>7.5 Income from trains using Bootstrap | Preceptor’s Primer for Bayesian Data Science</title>

<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/envisioned.css" rel="stylesheet" />
<link href="libs/msmb-css-0/msmb.css" rel="stylesheet" />
<script>
function toggle_visibility(id1, id2) {
var e = document.getElementById(id1);
var f = document.getElementById(id2);

e.style.display = ((e.style.display!='none') ? 'none' : 'block');

if(f.classList.contains('fa-plus-square')) {
    f.classList.add('fa-minus-square')
    f.classList.remove('fa-plus-square')
} else {
    f.classList.add('fa-plus-square')
    f.classList.remove('fa-minus-square')
}

}
</script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }

code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>



</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul class="navbar">
<li class="msmb"><p class="title">Preceptor's Primer for Bayesian Data Science<p><p class="author">David Kane</p>
<li class="dropdown" style="float:right">
<a href="javascript:void(0)" class="dropbtn">&#x25BE; Chapters</a>
<div class="dropdown-content">
<a href="index.html">Cover</a>
<a href="visualization.html"><span class="toc-section-number">1</span> Visualization</a>
<a href="wrangling.html"><span class="toc-section-number">2</span> Tidyverse</a>
<a href="rubin-causal-model.html"><span class="toc-section-number">3</span> Rubin Causal Model</a>
<a href="functions.html"><span class="toc-section-number">4</span> Functions</a>
<a href="probability.html"><span class="toc-section-number">5</span> Probability</a>
<a href="sampling.html"><span class="toc-section-number">6</span> Sampling</a>
<a href="confidence-intervals.html"><span class="toc-section-number">7</span> One Parameter</a>
<a href="two-parameters.html"><span class="toc-section-number">8</span> Two Parameters</a>
<a href="n-parameters.html"><span class="toc-section-number">9</span> N Parameters</a>
<a href="regression.html"><span class="toc-section-number">10</span> Continuous Response I</a>
<a href="multiple-regression.html"><span class="toc-section-number">11</span> Continuous Response II</a>
<a href="classification.html"><span class="toc-section-number">12</span> Discrete Response</a>
<a href="machine-learning.html"><span class="toc-section-number">13</span> Machine Learning</a>
<a href="animation.html"><span class="toc-section-number">14</span> Animation</a>
<a href="getting-help.html"><span class="toc-section-number">15</span> Getting Help</a>
<a href="maps.html"><span class="toc-section-number">16</span> Maps</a>
<a href="">(APPENDIX) Appendix</a>
<a href="productivity.html"><span class="toc-section-number">17</span> Productivity</a>
<a href="references.html">References</a>
<a href="shiny.html"><span class="toc-section-number">18</span> Shiny</a>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div id="income-from-trains-using-bootstrap" class="section level2">
<h2>
<span class="header-section-number">7.5</span> Income from trains using Bootstrap</h2>
<p>In addition to using <code>lm()</code>, we can also use bootsrapping to extract confidence intervals. Bootstrapping is a significant tool used in statistics. Bootstrapping repeatedly draws samples from a data set and derives standard errors and confidence intervals for any statistic. While using <code>lm()</code> can produce confidence intervals for the mean of a data set or the coefficient in a regression, bootstrapping can produce confidence intervals for any statistics, such as median, 3rd highest value, etc.</p>
<p>To use bootstrapping, we will need the <strong>tidyverse</strong> and <strong>rsample</strong> packages. The <strong>rsample</strong> package gives us commands to use for bootstrapping. For the purpose of this example, let’s try to find the confidence interval for the mean income in our trains dataset from Chapter 3.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="income-from-trains-using-bootstrap.html#cb98-1"></a><span class="co"># library(tidyverse)</span></span>
<span id="cb98-2"><a href="income-from-trains-using-bootstrap.html#cb98-2"></a><span class="co"># library(rsample)</span></span>
<span id="cb98-3"><a href="income-from-trains-using-bootstrap.html#cb98-3"></a><span class="co"># </span></span>
<span id="cb98-4"><a href="income-from-trains-using-bootstrap.html#cb98-4"></a><span class="co"># train_samples &lt;- bootstraps(trains, times = 1000)</span></span>
<span id="cb98-5"><a href="income-from-trains-using-bootstrap.html#cb98-5"></a><span class="co"># </span></span>
<span id="cb98-6"><a href="income-from-trains-using-bootstrap.html#cb98-6"></a><span class="co"># derive_mean_income &lt;- function(splits) {</span></span>
<span id="cb98-7"><a href="income-from-trains-using-bootstrap.html#cb98-7"></a><span class="co">#  x &lt;- analysis(splits)</span></span>
<span id="cb98-8"><a href="income-from-trains-using-bootstrap.html#cb98-8"></a><span class="co">#  return(mean(x$income))</span></span>
<span id="cb98-9"><a href="income-from-trains-using-bootstrap.html#cb98-9"></a><span class="co"># }</span></span>
<span id="cb98-10"><a href="income-from-trains-using-bootstrap.html#cb98-10"></a><span class="co"># </span></span>
<span id="cb98-11"><a href="income-from-trains-using-bootstrap.html#cb98-11"></a><span class="co"># train_samples$mean_income &lt;- map_dbl(train_samples$splits, derive_mean_income)</span></span>
<span id="cb98-12"><a href="income-from-trains-using-bootstrap.html#cb98-12"></a><span class="co"># quantile(train_samples$mean_income, probs = c(.025, .975))</span></span></code></pre></div>
<p>To find the confidence interval for the mean income in our train dataset, we first create our bootstrap samples using <code>bootstraps()</code>, where the times argument represents the number of bootstrap samples you want. Bootstrap samples are stored in a tibble and each bootstrap sample is nested in a split column. We then create a function for the statistic we are looking at; in this case, we want to focus on the mean income. Once we create our function, we can apply our statistic, the mean income, to each of our bootstrap samples by using map_dbl. Finally, we use quantile to extract our confidence intervals.</p>
<p>If we want to find a different statistic like the median income, we can essentially do the same thing but edit the function to derive the median income.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="income-from-trains-using-bootstrap.html#cb99-1"></a><span class="co"># library(tidyverse)</span></span>
<span id="cb99-2"><a href="income-from-trains-using-bootstrap.html#cb99-2"></a><span class="co"># library(rsample)</span></span>
<span id="cb99-3"><a href="income-from-trains-using-bootstrap.html#cb99-3"></a><span class="co"># </span></span>
<span id="cb99-4"><a href="income-from-trains-using-bootstrap.html#cb99-4"></a><span class="co"># train_samples &lt;- bootstraps(trains, times = 1000)</span></span>
<span id="cb99-5"><a href="income-from-trains-using-bootstrap.html#cb99-5"></a><span class="co"># </span></span>
<span id="cb99-6"><a href="income-from-trains-using-bootstrap.html#cb99-6"></a><span class="co"># derive_median_income &lt;- function(splits) {</span></span>
<span id="cb99-7"><a href="income-from-trains-using-bootstrap.html#cb99-7"></a><span class="co">#  x &lt;- analysis(splits)</span></span>
<span id="cb99-8"><a href="income-from-trains-using-bootstrap.html#cb99-8"></a><span class="co">#  return(median(x$income))</span></span>
<span id="cb99-9"><a href="income-from-trains-using-bootstrap.html#cb99-9"></a><span class="co"># }</span></span>
<span id="cb99-10"><a href="income-from-trains-using-bootstrap.html#cb99-10"></a><span class="co"># </span></span>
<span id="cb99-11"><a href="income-from-trains-using-bootstrap.html#cb99-11"></a><span class="co"># train_samples$median_income &lt;- map_dbl(train_samples$splits, derive_median_income)</span></span>
<span id="cb99-12"><a href="income-from-trains-using-bootstrap.html#cb99-12"></a><span class="co"># quantile(train_samples$median_income, probs = c(.025, .975))</span></span></code></pre></div>
<p>Redo but more quickly, estimating mean income.</p>
<p>Estimate median income, or 3rd highest income.</p>
</div></body></html>

<p style="text-align: center;">
<a href="using-lm-and-tidy-as-a-shortcut.html"><button class="btn btn-default">Previous</button></a>
<a href="parameter-uncertainty-and-unmodeled-variation.html"><button class="btn btn-default">Next</button></a>
</p>
<p class="build-date">Page built: 
2020-06-25
</p>
</div>
</div>



</body>
</html>
